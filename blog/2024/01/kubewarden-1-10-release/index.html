<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Kubewarden 1.10 release</title><link rel=icon type=image/svg href=/favicon.svg><link rel=mask-icon href=/favicon.svg><link rel=stylesheet type=text/css href=/sass/blog.min.css?1746172960><script async defer src=https://buttons.github.io/buttons.js></script><script type=text/javascript src=//cdn.bizible.com/scripts/bizible.js async></script></head><body><header><div class=sub-header><a href><img src=/images/logo-kubewarden.svg alt=Kubewarden></a>
<a href=#main-menu id=main-menu-toggle class=menu-toggle aria-label="Open main menu"><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><nav id=main-menu class=main-menu aria-label="Main menu"><a href=#main-menu-toggle id=main-menu-close class=menu-close aria-label="Close main menu"><span class=sr-only>Close main menu</span>
<span class="fa fa-close" aria-hidden=true></span></a><h2 id=main-menu-heading class=sr-only>Main menu</h2><ul class=menu><li><a href="https://artifacthub.io/packages/search?kind=13&sort=relevance&page=1" target=_blank class="btn no-bg">Policies</a></li><li><a href=https://charts.kubewarden.io/ target=_blank class="btn no-bg">Helm Charts</a></li><li><a href=https://docs.kubewarden.io/ target=_blank class="btn no-bg">Docs</a></li><li><a href="https://kubernetes.slack.com/?redir=%2Fmessages%2Fkubewarden" target=_blank class="btn no-bg">Slack</a></li><li><a href=https://bsky.app/profile/kubewarden.io target=_blank class="btn no-bg">Bluesky</a></li><li><a href=https://hachyderm.io/@kubewarden rel=me target=_blank class="btn no-bg">Mastodon</a></li><li><a href=/#get-in-touch target=_blank class="btn no-bg">Community</a></li><li><a href=/blog target=_blank class="btn no-bg">Blog</a></li><li><a href=https://docs.kubewarden.io/enterprise target=_blank class="btn no-bg">Enterprise</a></li><li><a href=https://github.com/kubewarden class="btn github"><img src=/images/icon-github.svg><span>Github</span></a></li></ul></nav><a href=#main-menu-toggle class=backdrop tabindex=-1 aria-hidden=true hidden></a></div></header><link rel=stylesheet href=/css/blog.css><section class=intro><div class=bg-primary><div class="wrap grid-one"><div><h1 style=color:#fff><a href=/blog>The Kubewarden blog</a>
<a href=/blog/index.xml><img src=/images/icon-rss.svg class=fill-white height=20></a></h1></div></div></div></section><main><section class=wrap><article><h1>Kubewarden 1.10 release</h1><p>Author: <author>VÃ­ctor Cuadrado</author></p><p>Published: <time>26 Jan 2024</time></p><p>Updated: <time>02 May 2025</time></p><div id=blog-post-content><p>We have the first release of 2024, Kubewarden 1.10.0! ðŸŽ‰ðŸ¥³</p><p>And this one contains a nice bag of goodies, let&rsquo;s have a look!</p><h2 id=reduced-memory-usage-and-increased-reliability-of-policy-servers>Reduced memory usage and increased reliability of Policy servers</h2><p>A nice graph is worth a thousand words!</p><figure><img src=/images/policy-server-optimization-1.10.png alt="graph of the policy-server memory optimization"></figure><p>Note the slightly lower memory consumption, and unchanging consumption when
scaling horizontally.</p><p>This graph represents the memory consumption of one instance of policy-server,
containing 13 policies:</p><ul><li>4 instances of &ldquo;verify-signatures&rdquo;</li><li>5 of &ldquo;pod-privileged&rdquo;</li><li>2 of &ldquo;go-wasi-template&rdquo; (a 20MB policy, WASI being experimental)</li><li>1 Rego policy</li><li>1 ordinary Rust policy</li></ul><p>The policy-server was configured with one worker to start, progressing to eight. For each worker
value, 10 samplings were taken.</p><h4 id=constant-memory-consumption-when-scaling-horizontally>Constant memory consumption when scaling horizontally</h4><p>Before, we needed one instance of the policy evaluator (hence the Wasmstime stack)
for each policy deployed.</p><p>Now, memory consumption is constant no matter how many parallel policy
evaluators are spawned when scaling horizontally, by increasing the number of
threads available in the machine. This is achieved by only creating an instance
of the policy evaluator per unique type of policy module.</p><p>For example, if a user has the apparmor policy deployed 5 times (with different
names, settings, etc), now only one instance of policy evaluator will be
allocated for all of those 5 deployments.</p><p>In addition, we rely now on Wasmtime&rsquo;s pre-initialization of Wasm modules. This
allows us to keep a deduplicated list of all the policies in use, in their
pre-initialized form. This list is shared between all policy evaluators in the
policy-server.</p><h4 id=protection-against-policy-memory-leaks-and-clean-slate-per-policy>Protection against policy memory leaks, and clean slate per policy</h4><p>Before, there were long-running policy evaluators, ready to process policy requests.</p><p>Now, policy evaluation mode happens on-demand: we receive a request, a fresh
policy evaluator is created, used just for evaluating that request, and
discarded.</p><p>This is possible as we now leverage Wasmtime&rsquo;s pre-initialization, hence
creation time of policy evaluators is greatly reduced.</p><p>Using this on-demand approach to policy evaluators brings two main advantages:</p><ul><li>Impact of policies leaking memory is now virtually non-existent.</li><li>Each evaluation starts with a clean slate, preventing bugs caused by policies
leaving unclean state between evaluations.</li></ul><h4 id=codebase-simplification-and-increased-test-coverage>Codebase simplification and increased test coverage</h4><p>Also, thanks to a big refactor, together with additional unit and integration
tests, the policy-server codebase has moved away from using a worker thread
pool for policy evaluation to an asynchronous approach, removing codebase complexity.</p><p>Stay tuned for more performance improvements!</p><h2 id=wasi-policies-written-in-go-can-now-be-context-aware>WASI policies written in Go can now be context aware</h2><p>Due to recent improvements in the official Go compiler, we have added
context-aware capabilities, via WASI, to the Kubewarden Go SDK, so it is
now possible to write context-aware Go WASI policies.</p><p>No divergence is needed when writing context-aware policies in WASI. Just use the Go SDK as usual,
making use of its <code>capabilities</code> package (which exposes querying for kubernetes
resources, OCI manifest digest, Sigstore signature verification, etc).</p><p>As an example, have a look at the
<a href=https://github.com/kubewarden/go-wasi-context-aware-test-policy>go-wasi-context-aware-test-policy</a>.</p><h2 id=controller-changes>Controller changes</h2><p>The controller now reconciles divergences between <code>ClusterAdmissionPolicies</code>
and <code>AdmissionPolicies</code> and their associated webhook objects. This helps mitigate
against attacks that delete or modify policy webhooks, preventing policies from working correctly. RBAC rights already mitigate against these attacks.</p><h2 id=audit-scanner-changes>Audit Scanner changes</h2><p>Thanks to the community contributions from Nuno Nelas and Bruno RenÃ© Santos, the
Audit Scanner can now be run with an in-memory store
for policy reporting. By default, it keeps using Etcd and the PolicyReports CRDs.
This paves the way to implementing more performant storage solutions for policy
reporting, such as a relational database backend.
See <code>--set auditScanner.store</code> in the kubewarden-controller chart for
configuring it.</p><h2 id=kwctl-changes>Kwctl changes</h2><p>When doing <code>kwctl inspect</code> we now hide signatures by default, for brevity. One
can still obtain them using <code>kwctl inspect --show-signatures</code>. In addition,
<code>kwctl inspect -o yaml</code> now will produce correct YAML.</p><h2 id=helm-charts-changes>Helm charts changes</h2><p>In addition to feature flags, bumps of dependencies, and policy versions, the
kubewarden-defaults chart now can configure <code>securityContexts</code>
for the default PolicyServer via the <code>--set securityContexts</code> value.
Also, mutating policies shipped as part of kubewarden-defaults chart now target
exclusively the lower type of resource (Pods).</p><p>The Policy Reporter sub-chart is now configured to not show by default the
&ldquo;Logs&rdquo; tab. You can configure it (and other related things) through the
<code>policy-reporter</code> value of the kubewarden-controller chart.</p><h2 id=general-housekeeping>General housekeeping</h2><p>Last but not least, as part of our ongoing efforts, we continuously refactor
and expand the test coverage of the codebase. While not end-user actionable,
the byproduct is more reliability.</p><h2 id=stay-tuned>Stay tuned!</h2><p>As always, we are curious about what features you would like next and how you are
enjoying Kubewarden. Reach out on <a href="https://kubernetes.slack.com/?redir=%2Fmessages%2Fkubewarden">Slack</a>
or join our <a href="https://teamup.com/ks2bj74dvw132mhjtj?view=a&showProfileAndInfo=0&showSidepanel=1&disableSidepanel=1&showMenu=1&showAgendaHeader=1&showAgendaDetails=0&showYearViewHeader=1">monthly community meeting</a>
to talk Kubewarden!</p></div><div><ul id=tags></ul></div><div></div></article></section></main><footer><p>&copy; 2025 Kubewarden Project Authors. All rights reserved.
The Linux Foundation has registered trademarks and uses trademarks.
For a list of trademarks of The Linux Foundation, please see our Trademark Usage page:
<a href=https://www.linuxfoundation.org/trademark-usage>https://www.linuxfoundation.org/trademark-usage</a></p></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-PSW07XK7TM"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-PSW07XK7TM',{anonymize_ip:!0})}</script></body></html>