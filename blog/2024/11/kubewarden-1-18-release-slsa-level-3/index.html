<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Kubewarden 1.18 release, SLSA level 3</title><link rel=icon type=image/svg href=/favicon.svg><link rel=mask-icon href=/favicon.svg><link rel=stylesheet type=text/css href=/sass/blog.min.css?1734333127><script async defer src=https://buttons.github.io/buttons.js></script><script type=text/javascript src=//cdn.bizible.com/scripts/bizible.js async></script></head><body><header><div class=sub-header><a href><img src=/images/logo-kubewarden.svg alt=Kubewarden></a>
<a href=#main-menu id=main-menu-toggle class=menu-toggle aria-label="Open main menu"><span aria-hidden=true></span><span aria-hidden=true></span><span aria-hidden=true></span></a><nav id=main-menu class=main-menu aria-label="Main menu"><a href=#main-menu-toggle id=main-menu-close class=menu-close aria-label="Close main menu"><span class=sr-only>Close main menu</span>
<span class="fa fa-close" aria-hidden=true></span></a><h2 id=main-menu-heading class=sr-only>Main menu</h2><ul class=menu><li><a href="https://artifacthub.io/packages/search?kind=13&sort=relevance&page=1" target=_blank class="btn no-bg">Policies</a></li><li><a href=https://charts.kubewarden.io/ target=_blank class="btn no-bg">Helm Charts</a></li><li><a href=https://docs.kubewarden.io/ target=_blank class="btn no-bg">Docs</a></li><li><a href="https://kubernetes.slack.com/?redir=%2Fmessages%2Fkubewarden" target=_blank class="btn no-bg">Slack</a></li><li><a href=https://twitter.com/kubewarden target=_blank class="btn no-bg">Twitter</a></li><li><a href=/#get-in-touch target=_blank class="btn no-bg">Community</a></li><li><a href=/blog target=_blank class="btn no-bg">Blog</a></li><li><a href=https://github.com/kubewarden class="btn github"><img src=/images/icon-github.svg><span>Github</span></a></li></ul></nav><a href=#main-menu-toggle class=backdrop tabindex=-1 aria-hidden=true hidden></a></div></header><link rel=stylesheet href=/css/blog.css><section class=intro><div class=bg-primary><div class="wrap grid-one"><div><h1 style=color:#fff><a href=/blog>The Kubewarden blog</a>
<a href=/blog/index.xml><img src=/images/icon-rss.svg class=fill-white height=20></a></h1></div></div></div></section><main><section class=wrap><article><h1>Kubewarden 1.18 release, SLSA level 3</h1><p>Author: <author>Víctor Cuadrado Juan</author></p><p>Published: <time>04 Nov 2024</time></p><p>Updated: <time>16 Dec 2024</time></p><div id=blog-post-content><p>We are thrilled to announce the release of Kubewarden v1.18.0. For this release
we have focused on achieving level 3 of the <a href=https://slsa.dev/spec/v1.0/>SLSA
standard</a>, in addition to minor bug fixes,
adding tests, and developer tech debt improvements.</p><h2 id=slsa-level-3>SLSA level 3</h2><p>Kubewarden has been at the forefront of Sigstore integration (being
co-maintainers of the upstream sigstore-rs Rust library), and have signed our
artifacts and provided SBOMs for several years.</p><p>For this cycle, we have made the necessary changes to our build pipelines to
achieve level 3 of SLSA. <a href=https://slsa.dev/spec/v1.0>SLSA</a> is the standard
for describing and improving supply chain security.</p><p>To achieve <a href=https://slsa.dev/spec/v1.0/levels#build-l3>SLSA level 3</a>, projects
need to provide a hardened build platform with strong tamper protection. All of
this is verified by providing signed provenance attestations, which verify
the build process, build dependencies, and aid in replicating the builds.</p><p>For us in Kubewarden this meant a slight refactor of our GitHub Actions
workflows to flatten reusable workflows, passing the artifacts' digest to the
provenance attestation creation securely, and publishing these new
attestations. For the attestation creation we have used <code>docker buildx</code>&rsquo;s
attestation creation settings and the actions/attest-build-provenance` GitHub
Action.</p><h3 id=new-provenance-attestations>New provenance attestations</h3><p>We now publish provenance attestations for:</p><ul><li>Container images: shipped as a signed container image layer.</li><li>Helm charts in our OCI registry: shipped as a signed OCI artifact layer
into GitHub&rsquo;s immutable attestation storage.</li><li>Our CLI utility <code>kwctl</code>: shipped into GitHub&rsquo;s immutable attestation storage.</li></ul><p>In Kubewarden we also use the following 3rd party dependencies:</p><ul><li>Community charts that we include as subcharts: Policy Reporter, to which we
have submitted provenance creation upstream.</li><li><code>kubectl</code> image used for Helm hooks: We will move to
<a href=https://github.com/rancher/kuberlr-kubectl><code>rancher/kuberlr-kubectl</code></a>, which
comes with provenance, and provides cached kubectl commands useful for airgap
installs.</li></ul><p>We have decided to implement provenance for policies at a later date.
Currently, policies can be either out of band OCI artifacts (usually from
artifacthub.io), or just a YAML definition (e.g: CEL policies using
<a href=https://artifacthub.io/packages/kubewarden/cel-policy/cel-policy>cel-policy</a>),
or Kyverno DSL policies using <a href=https://github.com/kubewarden/kyverno-dsl-policy>kyverno-dsl
-policy</a>. In addition, all
policies are sandboxed thanks to WebAssembly.</p><h3 id=verifying-the-attestations>Verifying the attestations</h3><p>For verifying the attestations, have a look at our
<a href=https://docs.kubewarden.io/tutorials/verifying-kubewarden>docs</a>. As usual,
we sign our attestations via Sigstore with keyless workflow.</p><p>The UX for verifying provenance attestations is still somewhat unproven across
this space. For binaries such as <code>kwctl</code> is as easy as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>$ gh attestation verify kwctl-linux-x86_64 --repo kubewarden/kwctl
Loaded digest sha256:64e0e28eef99f69a1e86f2677bb9c506c3fafe6d743c354b8a4b1c1b5ac90176 for file://kwctl-linux-x86_64
Loaded 2 attestations from GitHub API
✓ Verification succeeded!

sha256:64e0e28eef99f69a1e86f2677bb9c506c3fafe6d743c354b8a4b1c1b5ac90176 was attested by:
REPO              PREDICATE_TYPE                  WORKFLOW
kubewarden/kwctl  https://slsa.dev/provenance/v1  .github/workflows/build.yml@refs/tags/v1.18.0-rc1
kubewarden/kwctl  https://slsa.dev/provenance/v1  .github/workflows/build.yml@refs/heads/main
</code></pre></div><p>For container images, it means first finding the attestation manifest index
layer, and then the attestation layer itself. If in doubt, read each project&rsquo;s
developer docs in their respective GitHub repositories.</p><h2 id=shortnames-for-our-crds>shortNames for our CRDs</h2><p>Kubernetes supports short names for CRDs, and after the new PolicyGroups
feature, we think it&rsquo;s the perfect moment to include them. Short names simplify
day-to-day operations. For example, to list ClusterAdmissionPolicies:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>kubectl get cap
NAME                        POLICY SERVER   MUTATING   BACKGROUNDAUDIT   MODE      OBSERVED MODE   STATUS   AGE
do-not-run-as-root          default         true       true              monitor   monitor         active   3d
do-not-share-host-paths     default         false      true              monitor   monitor         active   3d
...
</code></pre></div><p>That&rsquo;s a lot better, right?</p><p>Here&rsquo;s our shortened resource types:</p><table><thead><tr><th>Resource</th><th>shortName</th></tr></thead><tbody><tr><td>AdmissionPolicies</td><td><strong>ap</strong></td></tr><tr><td>ClusterAdmissionPolicies</td><td><strong>cap</strong></td></tr><tr><td>AdmissionPolicyGroups</td><td><strong>apg</strong></td></tr><tr><td>ClusterAdmissionPolicyGroups</td><td><strong>capg</strong></td></tr><tr><td>PolicyServers</td><td><strong>ps</strong></td></tr></tbody></table><h2 id=deprecation-of-crds-version-v1alpha2>Deprecation of CRDs version <code>v1alpha2</code></h2><p>With this release, we are deprecating our CRDs version <code>v1alpha2</code> in favour of
the current <code>v1</code>. The current <code>v1</code> have been in use for several years already.
There’s no action on the users side, since our controller already takes care of
the migration.</p><h2 id=getting-in-touch>Getting in touch</h2><p>As always, you can contact us through <a href="https://kubernetes.slack.com/?redir=%2Fmessages%2Fkubewarden">Slack</a> and
<a href=https://github.com/orgs/kubewarden/discussions>GitHub discussions</a>.</p></div><div><ul id=tags></ul></div><div></div></article></section></main><footer><p>&copy; 2024 Kubewarden Project Authors. All rights reserved.
The Linux Foundation has registered trademarks and uses trademarks.
For a list of trademarks of The Linux Foundation, please see our Trademark Usage page:
<a href=https://www.linuxfoundation.org/trademark-usage>https://www.linuxfoundation.org/trademark-usage</a></p></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-PSW07XK7TM"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-PSW07XK7TM',{anonymize_ip:!0})}</script></body></html>